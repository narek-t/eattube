extends _layout
block content
	main.main-content
		section.full-height.first__section
			.container.scaleable-wrapper
				.scaleable-wrapper__inner
					.index-womans.index__images.animated.fadeInLeft
						img(src="img/index-womans.png", alt="")
					.index-man.index__images.animated.fadeInRight
						img(src="img/index-man.png", alt="")
					.index-tube.index__images.animated.bounceInDown
						img(src="img/tube1.png", alt="")
					h2.intro__heading.animated.bounceIn Попробуй<br>это на вкус!
		section.second__section
			.skew__wrapper.skew-direction__left
				.skew__wrapper--inner
					.skew__item.institute
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew1.png)")
						p.skew__item-heading
							span.skew__item-aligner в институте
					.skew__item.walk
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/walk.png)")
						p.skew__item-heading
							span.skew__item-aligner на прогулке
						.skew__item-text
							a.btn(href="#") Подробнее
							.skew__item-text--inner
								p EATTUBE -тот же натуральный чизкейк, 100% аналогичный по составу чизкейку, который вы можете купить в лучших ресторанах, только гораздо удобнее! 
								p EATTUBE- дает вам возможность наслаждаться любимым лакомством, где бы вы не находились!
								p Его удобно брать с собой, не боясь испортить сумку или карманы вашей одежде: тюбик изготовлены из высокотехнологичного материала, который может выдержать любые экстремальные условия.
								p Мы уважаем традиций по этому стараемся сохранить вкус классического чизкейка.  Мы помещаем все ингредиенты в тюбик отдельными слоями, чтобы вы чувствовали каждый вкус продукта отдельно, как в классическом ресторанном чизкейке.
					.skew__item.in-car
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew3.png)")
						p.skew__item-heading
							span.skew__item-aligner в машине
		section.tastes.cf
			.container
				h2.intro__heading НАши вкусы
				.tastes__wrapper
					.tastes__item
						.tastes__item--cart
							img.taste-tube(src="img/tube2.png", alt="")
							.tastes__item--form
								form
									input(type="number" min="1" class="tastes__input" value="1")
									input.btn(type="submit" value="КУПИТЬ")
							img.tube-cake(src="img/tube2-cake.png", alt="")
						.tastes__item--info
							p.tube__name Малиновый чизкейк
							p.tube__price 230 
								span.curr ₽
					.tastes__item
						.tastes__item--cart
							img.taste-tube(src="img/tube3.png", alt="")
							.tastes__item--form
								form
									input(type="number" min="1" class="tastes__input" value="1")
									input.btn(type="submit" value="КУПИТЬ")
							img.tube-cake(src="img/tube3-cake.png", alt="")
						.tastes__item--info
							p.tube__name Шоколадный чизкейк
							p.tube__price 230 
								span.curr ₽
					.tastes__item
						.tastes__item--cart
							img.taste-tube(src="img/tube4.png", alt="")
							.tastes__item--form
								form
									input(type="number" min="1" class="tastes__input" value="1")
									input.btn(type="submit" value="КУПИТЬ")
							img.tube-cake(src="img/tube4-cake.png", alt="")
						.tastes__item--info
							p.tube__name Вишневый чизкейк
							p.tube__price 230 
								span.curr ₽
		section.third__section
			.skew__wrapper.skew-direction__left
				.skew__wrapper--inner
					.skew__item.institute
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew4.png)")
						p.skew__item-heading
							span.skew__item-aligner УДОБНО
					.skew__item.walk
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew4.jpg)")
						p.skew__item-heading
							span.skew__item-aligner Вкусно
						
					.skew__item.in-car
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew5.jpg)")
						p.skew__item-heading
							span.skew__item-aligner Модно

		section.fourth__section
			.skew__wrapper.skew-direction__right
				.skew__wrapper--inner
					.skew__item.institute
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew6.jpg)")
						p.skew__item-heading
							span.skew__item-aligner креативно
					.skew__item.walk
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew7.jpg)")
						p.skew__item-heading
							span.skew__item-aligner 100% готов
						
					.skew__item.in-car
						.skew__item-inner
							.skew__item--overflow(style="background-image: url(img/skew8.jpg)")
						p.skew__item-heading
							span.skew__item-aligner не нужны приборы
		section.parallax-section.cf(data-parallax="scroll" data-image-src="img/pr-bg.jpg" data-speed="0.1")
			h2.intro__heading Наша компания  совместно с инопланетным разумом, создала продукт будуvщего! 
			img.nlo-img(src="img/nlo.png", alt="")
			.all-parts(data-parallax="scroll" data-image-src="img/all-parts.png" data-speed="0.2" data-z-index="0")
			.pr1
				img(src="img/pr-1.png", alt="")
				.txt-side
					.txt-side__inner
						p EATTUBE- это революция на рынке питания, полностью , от идеи до реализации разработанная нашей компанией. В течение полутора лет наш R&D отдел в связке с несколькими докторами наук разных профилей  и инопланетянами с Нибиру )) трудился над сложной задачей которую до нас не удавалось решить ни кому в Мире!! <br> Даже оборудование от чертежей до сборки, мы сделали сами. И сейчас мы с гордостью представляем вам продукт, который, очень надеемся, вам понравится!!!
			.pr2
				img(src="img/pr-2.png", alt="")
			.pr3
				img(src="img/pr-3.png", alt="")
			.pr4
				img(src="img/pr-4.png", alt="")
		section.video-wrapper
			button.play__video
			video#video_p
				source(src="img/eattube.mp4" type="video/mp4")
				| Your browser does not support HTML5 video.
		section.contacts
			.container.cf
				.content-side
					h2.intro__heading Контакты
					.addresses
						.select-wrapper
							p.select-heading Наши адреса:
							select#select-location
							ul#addresses__list.addresses__list.cf
								li
									span.city Москва,
									span.address Ленинский проспект, 158
								li
									span.city Москва,
									span.address Кутузовский проспект, 144
								li
									span.city Москва,
									span.address Ленинский проспект, 158
								li
									span.city Москва,
									span.address Кутузовский проспект, 144
					.contact-form
						p.heading Контакты
						form
							.contact-form__row
								.contact-form__col
									a.tel(href="tel:8-800 500-16-49") 8-800 500-16-49
									input(type="text" placeholder="Имя")
									input(type="email" placeholder="Email")
								.contact-form__col
									a.email(href="mailto:Eattube@eattube.org") Eattube@eattube.org
									textarea(placeholder="Сообщение")
							.submit-row
								input(type="submit" value="Отправить")

				.map-side
					.map-side__inner#map-canvas


block inlineScripts
	script.
		var map;
		var markerData = [
			{
				cityCoords: {
					lat: 55.75069009,
					lng: 37.62130737
				},
				cityName: "Москва",
				addresses: [
					{
						singleAddressContent: 'asdasdasdasd1',
						singleAddressLat: 55.69848571,
						singleAddressLng: 37.46612549,
						singleAddressImg: 'img/singleAddressLogo.png',
						singleAddressText: 'Ленинский проспект, 158'
					},
					{
						singleAddressContent: 'asdasdasdasd2',
						singleAddressLat: 55.80899899,
						singleAddressLng: 37.80670166,
						singleAddressImg: 'img/singleAddressLogo.png',
						singleAddressText: 'Ленинский проспект, 1581'
					},
				],

			},

			{
				cityCoords: {
					lat: 56.31463259,
					lng: 44.01638031
				},
				cityName: "Нижний Новгород",
				addresses: [
					{
						singleAddressContent: 'dsadsadsadsa1',
						singleAddressLat: 56.3297678,
						singleAddressLng: 43.85004044,
						singleAddressImg: 'img/singleAddressLogo.png',
						singleAddressText: 'Ленинский проспект, 1582'
					},
					{
						singleAddressContent: 'dsadsadsadsadsa2',
						singleAddressLat: 56.25727382,
						singleAddressLng: 44.02702332,
						singleAddressImg: 'img/singleAddressLogo.png',
						singleAddressText: 'Ленинский проспект, 1583'
					},
				],
			},
		];
		var infowindow = new google.maps.InfoWindow();
		var allmarkers = [];
		 
		function initialize() {
		 	map = new google.maps.Map(document.getElementById('map-canvas'), {
				zoom: 10,
				center: {lat: 55.75069009, lng: 37.62130737}
			});
			var cID = 0;
			var aID = 0;
			markerData.forEach(function(data) {
				data.addresses.forEach(function(innerData) {
					var newmarker= new google.maps.Marker({
						map:map,
						position:{lat:innerData.singleAddressLat, lng:innerData.singleAddressLng},
						icon: 'img/loc.png',
						cID: cID,
						aID: aID,
					});
					google.maps.event.addListener(newmarker, 'click', function(){
				        infowindow.close();
				        map.panTo(newmarker.getPosition());
				        infowindow.setContent( "<div class='infowindow' style='background-image: url("+innerData.singleAddressImg+")'>"+innerData.singleAddressContent+"</div>");
				        infowindow.open(map, newmarker);
				    });
				    allmarkers.push(newmarker);
				    aID++;
				});

				jQuery("#select-location").append('<option value="'+[data.cityCoords.lat, data.cityCoords.lng].join('|')+'">'+data.cityName+'</option>');
				cID++;
			});
		}
		google.maps.event.addDomListener(window, 'load', initialize);
		jQuery(document).on('change','#select-location',function() {
			var i = jQuery(this).prop('selectedIndex');
			var latlng = jQuery(this).val().split('|');
			var newlat = 1*latlng[0],
			newlng = 1*latlng[1];
			map.setCenter({lat:newlat, lng:newlng});
			map.setZoom(10);
			jQuery("#addresses__list").empty();
			markerData[i].addresses.forEach(function(data) {
				jQuery("#addresses__list").append('<li data-cityID="'+i+'" data-lat="'+data.singleAddressLat+'" data-lng="'+data.singleAddressLng+'"><span class="city">'+markerData[i].cityName+',</span><span class="address">'+data.singleAddressText+'</span></li>');
			})
		});
		jQuery('#addresses__list').on('click', 'li', function(event) {
			event.preventDefault();
			var cityID = jQuery(this).data('cityid');
			var addressID = jQuery(this).index();
			function findById(source, id) {
			    return source.filter(function( obj ) {
			        return +obj.cID === +id;
			    })
			}
			var result = findById( allmarkers, cityID );
			google.maps.event.trigger(result[addressID], 'click');


			var lat = jQuery(this).data('lat');
			var lng = jQuery(this).data('lng');
			var latLng = new google.maps.LatLng(lat,lng)
			map.panTo(latLng);
			map.setZoom(15);
		});